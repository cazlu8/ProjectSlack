{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app-compiled.js","sourcesContent":["'use strict';\nvar KEY = 'ntalk.sid', SECRET = 'ntalk';\nvar express = require('express')\n    , path = require('path')\n    , logger = require('morgan')\n    , cookieParser = require('cookie-parser')\n    , bodyParser = require('body-parser')\n    , load = require('express-load')\n    , expressSession = require('express-session')\n    , methodOverride = require('method-override')\n    , error = require('./middlewares/error')\n    , app = express()\n    , server = require('http').Server(app)\n    , io = require('socket.io')(server)\n    , cookie = cookieParser(SECRET)\n    , store = new expressSession.MemoryStore();\n\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'ejs');\napp.use(logger('dev'));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({extended: true}));\napp.use(cookie);\napp.use(expressSession({\n    secret: SECRET\n    , name: KEY\n    , resave: true\n    , saveUninitialized: true\n    , store: store\n}));\napp.use(methodOverride('_method'));\napp.use(express.static(path.join(__dirname, 'public')));\n\nio.use(function (socket, next) {\n    var data = socket.request;\n    cookie(data, {}, function (err) {\n        var sessionID = data.signedCookies[KEY];\n        store.get(sessionID, function (err, session) {\n            if (err || !session) {\n                return next(new Error('Acess Denied!'));\n            }\n            socket.handshake.session = session;\n            return next();\n\n        });\n    });\n});\n\nload('models')\n    .then('controllers')\n    .then('routes')\n    .into(app);\n\nload('sockets')\n    .into(io);\n\napp.use(error.notFound);\napp.use(error.serverError);\n\nserver.listen(3000, function () {\n    console.log('ntalk on port 3000');\n});\n\nmodule.exports = app;\n\n\n"]}
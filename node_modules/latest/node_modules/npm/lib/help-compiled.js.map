{"version":3,"sources":["help.js"],"names":[],"mappings":";;AACA,MAAM,CAAC,OAAO,GAAG,IAAI,CAAA;;AAErB,IAAI,CAAC,UAAU,GAAG,UAAU,IAAI,EAAE,EAAE,EAAE;AACpC,MAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;AACzD,aAAW,CAAC,EAAE,CAAC,CAAA;CAChB,CAAA;;AAED,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;IACtB,KAAK,GAAG,OAAO,CAAC,eAAe,CAAC;IAChC,GAAG,GAAG,OAAO,CAAC,UAAU,CAAC;IACzB,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC;IACvB,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC;IAC1B,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;;AAE1B,SAAS,IAAI,CAAE,IAAI,EAAE,EAAE,EAAE;AACvB,KAAG,CAAC,OAAO,CAAC,IAAI,EAAE,CAAA;AAClB,MAAI,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,MAAM,CAAA;;AAExC,MAAI,MAAM,GAAG,CAAC,CAAA;AACd,MAAI,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,EAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;AAClC,UAAM,GAAG,EAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAA;GACxB;;;AAGD,MAAI,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE;AAC9B,WAAO,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,CAAA;GACrD;;AAED,MAAI,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAA;;;AAG3C,MAAI,CAAC,OAAO,EAAE;AACZ,QAAI,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,KAAK,MAAM,GAAG,CAAC,GAAG,CAAC,CAAA;AACtC,WAAO,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAA;GAC3B;;;AAID,MAAK,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,IACvB,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,IACrB,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAK,EAC9B;AACA,OAAG,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAA;AACpC,OAAG,CAAC,KAAK,GAAG,QAAQ,CAAA;AACpB,WAAO,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAA;AACxC,WAAO,EAAE,EAAE,CAAA;GACZ;;;AAGD,MAAI,OAAO,GAAG,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;AAC1D,MAAI,IAAI,GAAG,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AAChD,MAAI,MAAM,EACR,IAAI,GAAG,CAAE,MAAM,CAAE,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;AAChD,WAAO,CAAC,KAAK,MAAM,CAAA;GACpB,CAAC,CAAC,CAAA;;;AAGL,MAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,CAAA;;;AAGlD,MAAI,OAAO,KAAK,QAAQ,EAAE,OAAO,GAAG,SAAS,CAAA,KACxC,IAAI,OAAO,KAAK,MAAM,EAAE,OAAO,GAAG,cAAc,CAAA;;;;;AAKrD,MAAI,WAAW,GAAG,2BAA2B,CAAA;AAC7C,MAAI,SAAS,GAAG,6BAA6B,CAAA;AAC7C,MAAI,CAAC,GAAG,QAAQ,GAAG,OAAO,GAAG,GAAG,GAAG,OAAO,GAAG,WAAW,GAAG,WAAW,GAAG,GAAG,CAAA;AAC5E,SAAO,IAAI,CAAC,OAAO,GAAG,KAAK,GAAG,CAAC,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE;AACnD,QAAI,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAA;;AAErB,QAAI,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;;AAE9D,QAAI,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE;AAC7B,UAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;AAC3B,UAAI,GAAG,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;;AAEnE,aAAO,GAAG,CAAA;KACX,CAAC,CAAA;;AAEF,WAAO,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAA;GACjC,CAAC,CAAA;CACH;;AAED,SAAS,OAAO,CAAE,IAAI,EAAE,KAAK,EAAE;AAC7B,MAAI,GAAG,GAAG,WAAW,CAAA;AACrB,MAAI,IAAI,GAAG,EAAE,CAAA;AACb,OAAK,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE,CAAC,EAAE;AAC/B,QAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;GACf,CAAC,CAAA;AACF,MAAI,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AAC/B,QAAI,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AACxB,QAAI,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AACxB,WAAO,EAAE,KAAK,EAAE,GAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAC3B,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GACxB,CAAC,CAAA;GACT,CAAC,CAAA;AACF,SAAO,IAAI,CAAC,CAAC,CAAC,CAAA;CACf;;AAED,SAAS,OAAO,CAAE,GAAG,EAAE,EAAE,EAAE;AACzB,MAAI,GAAG,GAAG,WAAW,CAAA;AACrB,MAAI,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AAC3B,MAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,CAAA;;;AAG3C,MAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC;MAC3C,GAAG,GAAG,EAAE,CAAA;AACZ,QAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAC5C,OAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;GACxB,CAAC,CAAA;AACF,KAAG,CAAC,OAAO,GAAG,OAAO,CAAA;AACrB,MAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;;AAErC,MAAI,IAAI,CAAA;AACR,UAAQ,MAAM;AACZ,SAAK,OAAO;AACV,UAAI,CAAC,GAAG,CAAC,IAAI,EAAE,qBAAqB,GAAG,GAAG,GAAG,KAAK,CAAC,CAAA;AACnD,UAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,CAAA;AACrC,UAAI,KAAK,GAAG,KAAK,CAAC,aAAa,EAAE,CAAC,EAAE,IAAI,CAAC,CAAA;AACzC,WAAK,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAA;AACrB,YAAK;;AAAA,AAEP,SAAK,SAAS;AACZ,YAAM,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AAChE,YAAK;;AAAA,AAEP;AACE,UAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,CAAA;AACrC,UAAI,UAAU,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,GAAG,EAAE,OAAO,CAAC,EAAE,IAAI,CAAC,CAAA;AACnD,gBAAU,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAA;AAC1B,YAAK;AAAA,GACR;CACF;;AAED,SAAS,OAAO,CAAE,GAAG,EAAE;AACrB,MAAI,IAAI,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;AACrC,MAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAA;AACvD,UAAQ,IAAI;AACV,SAAK,CAAC;AACJ,UAAI,GAAG,KAAK,CAAA;AACZ,YAAK;AAAA,AACP,SAAK,CAAC;AACJ,UAAI,GAAG,KAAK,CAAA;AACZ,YAAK;AAAA,AACP,SAAK,CAAC;AACJ,UAAI,GAAG,OAAO,CAAA;AACd,YAAK;AAAA,AACP,SAAK,CAAC;AACJ,UAAI,GAAG,MAAM,CAAA;AACb,YAAK;AAAA,AACP;AACE,YAAM,IAAI,KAAK,CAAC,uBAAuB,GAAG,IAAI,CAAC,CAAA;AAAA,GAClD;AACD,SAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,CAAA;CAC7D;;AAED,SAAS,QAAQ,CAAE,KAAK,EAAE,EAAE,EAAE;AAC5B,KAAG,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAA;AACpC,KAAG,CAAC,KAAK,GAAG,QAAQ,CAAA;AACpB,SAAO,CAAC,GAAG,CACT,CAAE,wBAAwB,EACtB,EAAE,EACF,4BAA4B,EAC5B,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM,EAAE,GAC/B,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAC1C,EAAE,EACF,sCAAsC,EACtC,0CAA0C,EAC1C,2CAA2C,EAC3C,4CAA4C,EAC5C,oCAAoC,EACpC,EAAE,EACF,4CAA4C,EAC5C,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,EACrC,uDAAuD,EACvD,gDAAgD,EAChD,EAAE,EACF,MAAM,GAAG,GAAG,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CACrD,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;AACjB,IAAE,CAAC,KAAK,CAAC,CAAA;CACV;;AAED,SAAS,MAAM,GAAI;;AAEjB,MAAI,MAAM,GAAG,CAAC,CAAA;AACd,SAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;AACnD,WAAO,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;GAC1B,CAAC,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE;AAC1B,OAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,CAAA;AAC1C,UAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,CAAA;AACnC,WAAO,GAAG,CAAA;GACX,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE;AACzB,QAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;QACX,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAA;AACnB,WAAO,QAAQ,GAAG,CAAC,GAAI,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,AAAC,GAC1D,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAChB,IAAI,CAAC,IAAI,GAAI,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,AAAC,CAAC,AAAC,CAAA;GACzD,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;CACd;;AAGD,SAAS,IAAI,CAAE,GAAG,EAAE;AAClB,MAAI,GAAG,GAAG,CAAC,EAAE,CAAC;MACV,CAAC,GAAG,CAAC;MACL,IAAI,CAAA;;AAER,MAAI,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAA;AAC7B,MAAI,CAAC,IAAI,EACP,IAAI,GAAG,EAAE,CAAA,KAET,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC,CAAA;;AAE9C,KAAG,CAAC,IAAI,CAAC,UAAU,CAAC,EAAC,CAAC,EAAE;AAAE,WAAO,CAAC,GAAC,CAAC,GAAC,CAAC,CAAC,GAAC,CAAC,CAAA;GAAE,CAAC,CACzC,OAAO,CAAC,UAAU,CAAC,EAAE;AACpB,QAAI,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,EAAE;AACvC,SAAG,CAAC,CAAC,CAAC,IAAI,IAAI,GAAC,CAAC,CAAA;KACjB,MAAM;AACL,SAAG,CAAC,CAAC,EAAE,CAAC,IAAI,GAAG,CAAA;AACf,SAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAA;KACX;GACF,CAAC,CAAA;AACJ,SAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;CACpC;;AAED,SAAS,WAAW,CAAE,EAAE,EAAE;AACxB,MAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,yBAAyB,CAAC,CAAA;AAC1D,MAAI,CAAC,CAAC,EAAE,UAAU,EAAE,EAAE,KAAK,EAAE;AAC3B,QAAI,EAAE,EACJ,OAAO,EAAE,CAAC,EAAE,CAAC,CAAA;AACf,MAAE,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,IAAI,EAAE;AACrD,UAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAA;AACnD,UAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAA;AAChC,SAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAA;AAChB,aAAO,GAAG,CAAA;KACX,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAA;GACrB,CAAC,CAAA;CACH","file":"help-compiled.js","sourcesContent":["\nmodule.exports = help\n\nhelp.completion = function (opts, cb) {\n  if (opts.conf.argv.remain.length > 2) return cb(null, [])\n  getSections(cb)\n}\n\nvar path = require(\"path\")\n  , spawn = require(\"./utils/spawn\")\n  , npm = require(\"./npm.js\")\n  , log = require(\"npmlog\")\n  , opener = require(\"opener\")\n  , glob = require(\"glob\")\n\nfunction help (args, cb) {\n  npm.spinner.stop()\n  var argv = npm.config.get(\"argv\").cooked\n\n  var argnum = 0\n  if (args.length === 2 && ~~args[0]) {\n    argnum = ~~args.shift()\n  }\n\n  // npm help foo bar baz: search topics\n  if (args.length > 1 && args[0]) {\n    return npm.commands[\"help-search\"](args, argnum, cb)\n  }\n\n  var section = npm.deref(args[0]) || args[0]\n\n  // npm help <noargs>:  show basic usage\n  if (!section) {\n    var valid = argv[0] === \"help\" ? 0 : 1\n    return npmUsage(valid, cb)\n  }\n\n\n  // npm <cmd> -h: show command usage\n  if ( npm.config.get(\"usage\")\n    && npm.commands[section]\n    && npm.commands[section].usage\n  ) {\n    npm.config.set(\"loglevel\", \"silent\")\n    log.level = \"silent\"\n    console.log(npm.commands[section].usage)\n    return cb()\n  }\n\n  // npm apihelp <section>: Prefer section 3 over section 1\n  var apihelp = argv.length && -1 !== argv[0].indexOf(\"api\")\n  var pref = apihelp ? [3, 1, 5, 7] : [1, 3, 5, 7]\n  if (argnum)\n    pref = [ argnum ].concat(pref.filter(function (n) {\n      return n !== argnum\n    }))\n\n  // npm help <section>: Try to find the path\n  var manroot = path.resolve(__dirname, \"..\", \"man\")\n\n  // legacy\n  if (section === \"global\") section = \"folders\"\n  else if (section === \"json\") section = \"package.json\"\n\n  // find either /section.n or /npm-section.n\n  // The glob is used in the glob.  The regexp is used much\n  // further down.  Globs and regexps are different\n  var compextglob = \".+(gz|bz2|lzma|[FYzZ]|xz)\"\n  var compextre = \"\\\\.(gz|bz2|lzma|[FYzZ]|xz)$\"\n  var f = \"+(npm-\" + section + \"|\" + section + \").[0-9]?(\" + compextglob + \")\"\n  return glob(manroot + \"/*/\" + f, function (er, mans) {\n    if (er) return cb(er)\n\n    if (!mans.length) return npm.commands[\"help-search\"](args, cb)\n\n    mans = mans.map(function (man) {\n      var ext = path.extname(man)\n      if (man.match(new RegExp(compextre))) man = path.basename(man, ext)\n\n      return man\n    })\n\n    viewMan(pickMan(mans, pref), cb)\n  })\n}\n\nfunction pickMan (mans, pref_) {\n  var nre = /([0-9]+)$/\n  var pref = {}\n  pref_.forEach(function (sect, i) {\n    pref[sect] = i\n  })\n  mans = mans.sort(function (a, b) {\n    var an = a.match(nre)[1]\n    var bn = b.match(nre)[1]\n    return an === bn ? (a > b ? -1 : 1)\n         : pref[an] < pref[bn] ? -1\n         : 1\n  })\n  return mans[0]\n}\n\nfunction viewMan (man, cb) {\n  var nre = /([0-9]+)$/\n  var num = man.match(nre)[1]\n  var section = path.basename(man, \".\" + num)\n\n  // at this point, we know that the specified man page exists\n  var manpath = path.join(__dirname, \"..\", \"man\")\n    , env = {}\n  Object.keys(process.env).forEach(function (i) {\n    env[i] = process.env[i]\n  })\n  env.MANPATH = manpath\n  var viewer = npm.config.get(\"viewer\")\n\n  var conf\n  switch (viewer) {\n    case \"woman\":\n      var a = [\"-e\", \"(woman-find-file \\\"\" + man + \"\\\")\"]\n      conf = { env: env, stdio: \"inherit\" }\n      var woman = spawn(\"emacsclient\", a, conf)\n      woman.on(\"close\", cb)\n      break\n\n    case \"browser\":\n      opener(htmlMan(man), { command: npm.config.get(\"browser\") }, cb)\n      break\n\n    default:\n      conf = { env: env, stdio: \"inherit\" }\n      var manProcess = spawn(\"man\", [num, section], conf)\n      manProcess.on(\"close\", cb)\n      break\n  }\n}\n\nfunction htmlMan (man) {\n  var sect = +man.match(/([0-9]+)$/)[1]\n  var f = path.basename(man).replace(/([0-9]+)$/, \"html\")\n  switch (sect) {\n    case 1:\n      sect = \"cli\"\n      break\n    case 3:\n      sect = \"api\"\n      break\n    case 5:\n      sect = \"files\"\n      break\n    case 7:\n      sect = \"misc\"\n      break\n    default:\n      throw new Error(\"invalid man section: \" + sect)\n  }\n  return path.resolve(__dirname, \"..\", \"html\", \"doc\", sect, f)\n}\n\nfunction npmUsage (valid, cb) {\n  npm.config.set(\"loglevel\", \"silent\")\n  log.level = \"silent\"\n  console.log(\n    [ \"\\nUsage: npm <command>\"\n      , \"\"\n      , \"where <command> is one of:\"\n      , npm.config.get(\"long\") ? usages()\n        : \"    \" + wrap(Object.keys(npm.commands))\n      , \"\"\n      , \"npm <cmd> -h     quick help on <cmd>\"\n      , \"npm -l           display full usage info\"\n      , \"npm faq          commonly asked questions\"\n      , \"npm help <term>  search for help on <term>\"\n      , \"npm help npm     involved overview\"\n      , \"\"\n      , \"Specify configs in the ini-formatted file:\"\n      , \"    \" + npm.config.get(\"userconfig\")\n      , \"or on the command line via: npm <command> --key value\"\n      , \"Config info can be viewed via: npm help config\"\n      , \"\"\n      , \"npm@\" + npm.version + \" \" + path.dirname(__dirname)\n      ].join(\"\\n\"))\n  cb(valid)\n}\n\nfunction usages () {\n  // return a string of <cmd>: <usage>\n  var maxLen = 0\n  return Object.keys(npm.commands).filter(function (c) {\n    return c === npm.deref(c)\n  }).reduce(function (set, c) {\n    set.push([c, npm.commands[c].usage || \"\"])\n    maxLen = Math.max(maxLen, c.length)\n    return set\n  }, []).map(function (item) {\n    var c = item[0]\n      , usage = item[1]\n    return \"\\n    \" + c + (new Array(maxLen - c.length + 2).join(\" \"))\n         + (usage.split(\"\\n\")\n            .join(\"\\n\" + (new Array(maxLen + 6).join(\" \"))))\n  }).join(\"\\n\")\n}\n\n\nfunction wrap (arr) {\n  var out = [\"\"]\n    , l = 0\n    , line\n\n  line = process.stdout.columns\n  if (!line)\n    line = 60\n  else\n    line = Math.min(60, Math.max(line - 16, 24))\n\n  arr.sort(function (a,b) { return a<b?-1:1 })\n    .forEach(function (c) {\n      if (out[l].length + c.length + 2 < line) {\n        out[l] += \", \"+c\n      } else {\n        out[l++] += \",\"\n        out[l] = c\n      }\n    })\n  return out.join(\"\\n    \").substr(2)\n}\n\nfunction getSections (cb) {\n  var g = path.resolve(__dirname, \"../man/man[0-9]/*.[0-9]\")\n  glob(g, function (er, files) {\n    if (er)\n      return cb(er)\n    cb(null, Object.keys(files.reduce(function (acc, file) {\n      file = path.basename(file).replace(/\\.[0-9]+$/, \"\")\n      file = file.replace(/^npm-/, \"\")\n      acc[file] = true\n      return acc\n    }, { help: true })))\n  })\n}\n"]}
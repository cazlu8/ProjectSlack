{"version":3,"sources":["find-prefix.js"],"names":[],"mappings":";;;;AAEA,MAAM,CAAC,OAAO,GAAG,UAAU,CAAA;;AAE3B,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAA;AACtB,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;;AAE1B,SAAS,UAAU,CAAE,CAAC,EAAE,GAAG,EAAE;AAC3B,WAAS,EAAE,CAAE,EAAE,EAAE,CAAC,EAAE;AAClB,WAAO,CAAC,QAAQ,CAAC,YAAY;AAC3B,SAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;KACX,CAAC,CAAA;GACH;;AAED,GAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;;;AAInB,MAAI,QAAQ,GAAG,KAAK,CAAA;AACpB,SAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,cAAc,EAAE;AAC1C,KAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;AACnB,YAAQ,GAAG,IAAI,CAAA;GAChB;AACD,MAAI,QAAQ,EAAE,OAAO,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;;AAEhC,aAAW,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAA;CACtB;;AAED,SAAS,WAAW,CAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE;AACrC,MAAI,CAAC,KAAK,GAAG,IACL,OAAO,CAAC,QAAQ,KAAK,OAAO,IAAI,CAAC,CAAC,KAAK,CAAC,qBAAqB,CAAC,AAAC,EAAE;AACvE,WAAO,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;GAC1B;AACD,IAAE,CAAC,OAAO,CAAC,CAAC,EAAE,UAAU,EAAE,EAAE,KAAK,EAAE;;;;AAIjC,QAAI,EAAE,IAAI,CAAC,KAAK,QAAQ,EAAE;AACxB,UAAI,EAAE,CAAC,IAAI,KAAK,QAAQ,EAAE,OAAO,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACpD,aAAO,EAAE,CAAC,EAAE,CAAC,CAAA;KACd;;;AAGD,QAAI,EAAE,EAAE,OAAO,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;;AAEjC,QAAI,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,IACjC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,EAAE;AAC3C,aAAO,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;KACnB;;AAED,QAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;AACvB,QAAI,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;;AAEtC,WAAO,WAAW,CAAC,CAAC,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAA;GACpC,CAAC,CAAA;CACH","file":"find-prefix-compiled.js","sourcesContent":["// try to find the most reasonable prefix to use\n\nmodule.exports = findPrefix\n\nvar fs = require(\"fs\")\nvar path = require(\"path\")\n\nfunction findPrefix (p, cb_) {\n  function cb (er, p) {\n    process.nextTick(function () {\n      cb_(er, p)\n    })\n  }\n\n  p = path.resolve(p)\n  // if there's no node_modules folder, then\n  // walk up until we hopefully find one.\n  // if none anywhere, then use cwd.\n  var walkedUp = false\n  while (path.basename(p) === \"node_modules\") {\n    p = path.dirname(p)\n    walkedUp = true\n  }\n  if (walkedUp) return cb(null, p)\n\n  findPrefix_(p, p, cb)\n}\n\nfunction findPrefix_ (p, original, cb) {\n  if (p === \"/\"\n      || (process.platform === \"win32\" && p.match(/^[a-zA-Z]:(\\\\|\\/)?$/))) {\n    return cb(null, original)\n  }\n  fs.readdir(p, function (er, files) {\n    // an error right away is a bad sign.\n    // unless the prefix was simply a non\n    // existent directory.\n    if (er && p === original) {\n      if (er.code === \"ENOENT\") return cb(null, original);\n      return cb(er)\n    }\n\n    // walked up too high or something.\n    if (er) return cb(null, original)\n\n    if (files.indexOf(\"node_modules\") !== -1\n        || files.indexOf(\"package.json\") !== -1) {\n      return cb(null, p)\n    }\n\n    var d = path.dirname(p)\n    if (d === p) return cb(null, original)\n\n    return findPrefix_(d, original, cb)\n  })\n}\n"]}
{"version":3,"sources":["get-credentials-by-uri.js"],"names":[],"mappings":"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","file":"get-credentials-by-uri-compiled.js","sourcesContent":["var assert = require(\"assert\")\n\nvar toNerfDart = require(\"./nerf-dart.js\")\n\nmodule.exports = getCredentialsByURI\n\nfunction getCredentialsByURI (uri) {\n  assert(uri && typeof uri === \"string\", \"registry URL is required\")\n  var nerfed = toNerfDart(uri)\n  var defnerf = toNerfDart(this.get(\"registry\"))\n\n  // hidden class micro-optimization\n  var c = {\n    scope      : nerfed,\n    token      : undefined,\n    password   : undefined,\n    username   : undefined,\n    email      : undefined,\n    auth       : undefined,\n    alwaysAuth : undefined\n  }\n\n  if (this.get(nerfed + \":_authToken\")) {\n    c.token = this.get(nerfed + \":_authToken\")\n    // the bearer token is enough, don't confuse things\n    return c\n  }\n\n  // Handle the old-style _auth=<base64> style for the default\n  // registry, if set.\n  //\n  // XXX(isaacs): Remove when npm 1.4 is no longer relevant\n  var authDef = this.get(\"_auth\")\n  var userDef = this.get(\"username\")\n  var passDef = this.get(\"_password\")\n  if (authDef && !(userDef && passDef)) {\n    authDef = new Buffer(authDef, \"base64\").toString()\n    authDef = authDef.split(\":\")\n    userDef = authDef.shift()\n    passDef = authDef.join(\":\")\n  }\n\n  if (this.get(nerfed + \":_password\")) {\n    c.password = new Buffer(this.get(nerfed + \":_password\"), \"base64\").toString(\"utf8\")\n  } else if (nerfed === defnerf && passDef) {\n    c.password = passDef\n  }\n\n  if (this.get(nerfed + \":username\")) {\n    c.username = this.get(nerfed + \":username\")\n  } else if (nerfed === defnerf && userDef) {\n    c.username = userDef\n  }\n\n  if (this.get(nerfed + \":email\")) {\n    c.email = this.get(nerfed + \":email\")\n  } else if (this.get(\"email\")) {\n    c.email = this.get(\"email\")\n  }\n\n  if (this.get(nerfed + \":always-auth\") !== undefined) {\n    var val = this.get(nerfed + \":always-auth\")\n    c.alwaysAuth = val === \"false\" ? false : !!val\n  } else if (this.get(\"always-auth\") !== undefined) {\n    c.alwaysAuth = this.get(\"always-auth\")\n  }\n\n  if (c.username && c.password) {\n    c.auth = new Buffer(c.username + \":\" + c.password).toString(\"base64\")\n  }\n\n  return c\n}\n"]}
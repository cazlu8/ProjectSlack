{"version":3,"sources":["load-cafile.js"],"names":[],"mappings":";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,CAAA;;AAE3B,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAA;;AAEtB,SAAS,UAAU,CAAC,UAAU,EAAE,EAAE,EAAE;AAClC,MAAI,CAAC,UAAU,EACb,OAAO,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;;AAE7B,IAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,EAAE,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;;AAEvD,WAAS,WAAW,CAAC,EAAE,EAAE,MAAM,EAAE;;AAE/B,QAAI,EAAE,EAAE;;AAEN,UAAI,EAAE,CAAC,IAAI,KAAK,QAAQ,EAAE,OAAO,EAAE,EAAE,CAAA;AACrC,aAAO,EAAE,CAAC,EAAE,CAAC,CAAA;KACd;;AAED,QAAI,KAAK,GAAG,2BAA2B,CAAA;AACvC,QAAI,MAAM,CAAA;;AAEV,UAAM,GAAG,MAAM,CACZ,KAAK,CAAC,KAAK,CAAC,CACZ,MAAM,CAAC,UAAS,EAAE,EAAE;AACnB,aAAO,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,CAAA;KACnB,CAAC,CACD,GAAG,CAAC,UAAS,EAAE,EAAE;AAChB,aAAO,EAAE,CAAC,QAAQ,EAAE,GAAG,KAAK,CAAA;KAC7B,CAAC,CAAA;;AAEJ,QAAI,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;AACtB,MAAE,CAAC,IAAI,CAAC,CAAA;GACT;CACF","file":"load-cafile-compiled.js","sourcesContent":["module.exports = loadCAFile\n\nvar fs = require(\"fs\")\n\nfunction loadCAFile(cafilePath, cb) {\n  if (!cafilePath)\n    return process.nextTick(cb)\n\n  fs.readFile(cafilePath, \"utf8\", afterCARead.bind(this))\n\n  function afterCARead(er, cadata) {\n\n    if (er) {\n      // previous cafile no longer exists, so just continue on gracefully\n      if (er.code === 'ENOENT') return cb()\n      return cb(er)\n    }\n\n    var delim = \"-----END CERTIFICATE-----\"\n    var output\n\n    output = cadata\n      .split(delim)\n      .filter(function(xs) {\n        return !!xs.trim()\n      })\n      .map(function(xs) {\n        return xs.trimLeft() + delim\n      })\n\n    this.set(\"ca\", output)\n    cb(null)\n  }\n}\n"]}
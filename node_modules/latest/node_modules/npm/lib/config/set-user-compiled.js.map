{"version":3,"sources":["set-user.js"],"names":[],"mappings":";;AAAA,MAAM,CAAC,OAAO,GAAG,OAAO,CAAA;;AAExB,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAA;AAC9B,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;AAC1B,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAA;AACtB,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAA;;AAE9B,SAAS,OAAO,CAAE,EAAE,EAAE;AACpB,MAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAA;AAC3B,QAAM,CAAC,WAAW,KAAK,MAAM,CAAC,SAAS,CAAC,CAAA;;;;;AAKxC,MAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,EAAE,CAAA;AACnC,MAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE;AACxB,eAAW,CAAC,IAAI,GAAG,CAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,AAAC,CAAA;AAC1C,WAAO,EAAE,EAAE,CAAA;GACZ;;AAED,MAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAA;AAC7C,QAAM,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE;AAC3B,QAAI,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAA;AACrB,MAAE,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE,EAAE,EAAE;AAChC,iBAAW,CAAC,IAAI,GAAG,EAAE,IAAI,EAAE,CAAC,GAAG,CAAA;AAC/B,aAAO,EAAE,CAAC,EAAE,CAAC,CAAA;KACd,CAAC,CAAA;GACH,CAAC,CAAA;CACH","file":"set-user-compiled.js","sourcesContent":["module.exports = setUser\n\nvar assert = require(\"assert\")\nvar path = require(\"path\")\nvar fs = require(\"fs\")\nvar mkdirp = require(\"mkdirp\")\n\nfunction setUser (cb) {\n  var defaultConf = this.root\n  assert(defaultConf !== Object.prototype)\n\n  // If global, leave it as-is.\n  // If not global, then set the user to the owner of the prefix folder.\n  // Just set the default, so it can be overridden.\n  if (this.get(\"global\")) return cb()\n  if (process.env.SUDO_UID) {\n    defaultConf.user = +(process.env.SUDO_UID)\n    return cb()\n  }\n\n  var prefix = path.resolve(this.get(\"prefix\"))\n  mkdirp(prefix, function (er) {\n    if (er) return cb(er)\n    fs.stat(prefix, function (er, st) {\n      defaultConf.user = st && st.uid\n      return cb(er)\n    })\n  })\n}\n"]}
{"version":3,"sources":["lifecycle.js"],"names":[],"mappings":"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","file":"lifecycle-compiled.js","sourcesContent":["exports = module.exports = lifecycle\nexports.cmd = cmd\nexports.makeEnv = makeEnv\n\nvar log = require(\"npmlog\")\nvar spawn = require(\"./spawn\")\nvar npm = require(\"../npm.js\")\nvar path = require(\"path\")\nvar fs = require(\"graceful-fs\")\nvar chain = require(\"slide\").chain\nvar Stream = require(\"stream\").Stream\nvar PATH = \"PATH\"\nvar uidNumber = require(\"uid-number\")\nvar umask = require(\"./umask\")\n\n// windows calls it's path \"Path\" usually, but this is not guaranteed.\nif (process.platform === \"win32\") {\n  PATH = \"Path\"\n  Object.keys(process.env).forEach(function (e) {\n    if (e.match(/^PATH$/i)) {\n      PATH = e\n    }\n  })\n}\n\nfunction lifecycle (pkg, stage, wd, unsafe, failOk, cb) {\n  if (typeof cb !== \"function\") cb = failOk, failOk = false\n  if (typeof cb !== \"function\") cb = unsafe, unsafe = false\n  if (typeof cb !== \"function\") cb = wd, wd = null\n\n  while (pkg && pkg._data) pkg = pkg._data\n  if (!pkg) return cb(new Error(\"Invalid package data\"))\n\n  log.info(stage, pkg._id)\n  if (!pkg.scripts || npm.config.get('ignore-scripts')) pkg.scripts = {}\n\n  validWd(wd || path.resolve(npm.dir, pkg.name), function (er, wd) {\n    if (er) return cb(er)\n\n    unsafe = unsafe || npm.config.get(\"unsafe-perm\")\n\n    if ((wd.indexOf(npm.dir) !== 0 || path.basename(wd) !== pkg.name)\n        && !unsafe && pkg.scripts[stage]) {\n      log.warn( \"cannot run in wd\", \"%s %s (wd=%s)\"\n              , pkg._id, pkg.scripts[stage], wd)\n      return cb()\n    }\n\n    // set the env variables, then run scripts as a child process.\n    var env = makeEnv(pkg)\n    env.npm_lifecycle_event = stage\n    env.npm_node_execpath = env.NODE = env.NODE || process.execPath\n    env.npm_execpath = require.main.filename\n\n    // \"nobody\" typically doesn't have permission to write to /tmp\n    // even if it's never used, sh freaks out.\n    if (!npm.config.get(\"unsafe-perm\")) env.TMPDIR = wd\n\n    lifecycle_(pkg, stage, wd, env, unsafe, failOk, cb)\n  })\n}\n\nfunction checkForLink (pkg, cb) {\n  var f = path.join(npm.dir, pkg.name)\n  fs.lstat(f, function (er, s) {\n    cb(null, !(er || !s.isSymbolicLink()))\n  })\n}\n\nfunction lifecycle_ (pkg, stage, wd, env, unsafe, failOk, cb) {\n  var pathArr = []\n    , p = wd.split(\"node_modules\")\n    , acc = path.resolve(p.shift())\n\n  p.forEach(function (pp) {\n    pathArr.unshift(path.join(acc, \"node_modules\", \".bin\"))\n    acc = path.join(acc, \"node_modules\", pp)\n  })\n  pathArr.unshift(path.join(acc, \"node_modules\", \".bin\"))\n\n  // we also unshift the bundled node-gyp-bin folder so that\n  // the bundled one will be used for installing things.\n  pathArr.unshift(path.join(__dirname, \"..\", \"..\", \"bin\", \"node-gyp-bin\"))\n\n  if (env[PATH]) pathArr.push(env[PATH])\n  env[PATH] = pathArr.join(process.platform === \"win32\" ? \";\" : \":\")\n\n  var packageLifecycle = pkg.scripts && pkg.scripts.hasOwnProperty(stage)\n\n  if (packageLifecycle) {\n    // define this here so it's available to all scripts.\n    env.npm_lifecycle_script = pkg.scripts[stage]\n  }\n\n  function done (er) {\n    if (er) {\n      if (npm.config.get(\"force\")) {\n        log.info(\"forced, continuing\", er)\n        er = null\n      } else if (failOk) {\n        log.warn(\"continuing anyway\", er.message)\n        er = null\n      }\n    }\n    cb(er)\n  }\n\n  chain\n    ( [ packageLifecycle && [runPackageLifecycle, pkg, env, wd, unsafe]\n      , [runHookLifecycle, pkg, env, wd, unsafe] ]\n    , done )\n}\n\nfunction validWd (d, cb) {\n  fs.stat(d, function (er, st) {\n    if (er || !st.isDirectory()) {\n      var p = path.dirname(d)\n      if (p === d) {\n        return cb(new Error(\"Could not find suitable wd\"))\n      }\n      return validWd(p, cb)\n    }\n    return cb(null, d)\n  })\n}\n\nfunction runPackageLifecycle (pkg, env, wd, unsafe, cb) {\n  // run package lifecycle scripts in the package root, or the nearest parent.\n  var stage = env.npm_lifecycle_event\n    , cmd = env.npm_lifecycle_script\n\n  var note = \"\\n> \" + pkg._id + \" \" + stage + \" \" + wd\n           + \"\\n> \" + cmd + \"\\n\"\n  runCmd(note, cmd, pkg, env, stage, wd, unsafe, cb)\n}\n\n\nvar running = false\nvar queue = []\nfunction dequeue() {\n  running = false\n  if (queue.length) {\n    var r = queue.shift()\n    runCmd.apply(null, r)\n  }\n}\n\nfunction runCmd (note, cmd, pkg, env, stage, wd, unsafe, cb) {\n  if (running) {\n    queue.push([note, cmd, pkg, env, stage, wd, unsafe, cb])\n    return\n  }\n\n  running = true\n  log.pause()\n  var user = unsafe ? null : npm.config.get(\"user\")\n    , group = unsafe ? null : npm.config.get(\"group\")\n\n  if (log.level !== 'silent') {\n    if (npm.spinner.int) {\n      npm.config.get(\"logstream\").write(\"\\r \\r\")\n    }\n    console.log(note)\n  }\n  log.verbose(\"unsafe-perm in lifecycle\", unsafe)\n\n  if (process.platform === \"win32\") {\n    unsafe = true\n  }\n\n  if (unsafe) {\n    runCmd_(cmd, pkg, env, wd, stage, unsafe, 0, 0, cb)\n  } else {\n    uidNumber(user, group, function (er, uid, gid) {\n      runCmd_(cmd, pkg, env, wd, stage, unsafe, uid, gid, cb)\n    })\n  }\n}\n\nfunction runCmd_ (cmd, pkg, env, wd, stage, unsafe, uid, gid, cb_) {\n\n  function cb (er) {\n    cb_.apply(null, arguments)\n    log.resume()\n    process.nextTick(dequeue)\n  }\n\n  var conf = { cwd: wd\n             , env: env\n             , stdio: [ 0, 1, 2 ]\n             }\n\n  if (!unsafe) {\n    conf.uid = uid ^ 0\n    conf.gid = gid ^ 0\n  }\n\n  var sh = \"sh\"\n  var shFlag = \"-c\"\n\n  if (process.platform === \"win32\") {\n    sh = process.env.comspec || \"cmd\"\n    shFlag = \"/c\"\n    conf.windowsVerbatimArguments = true\n  }\n\n  var proc = spawn(sh, [shFlag, cmd], conf)\n  proc.on(\"error\", procError)\n  proc.on(\"close\", function (code, signal) {\n    if (signal) {\n      process.kill(process.pid, signal);\n    } else if (code) {\n      var er = new Error(\"Exit status \" + code)\n    }\n    procError(er)\n  })\n\n  function procError (er) {\n    if (er && !npm.ROLLBACK) {\n      log.info(pkg._id, \"Failed to exec \"+stage+\" script\")\n      er.message = pkg._id + \" \"\n                 + stage + \": `\" + cmd +\"`\\n\"\n                 + er.message\n      if (er.code !== \"EPERM\") {\n        er.code = \"ELIFECYCLE\"\n      }\n      er.pkgid = pkg._id\n      er.stage = stage\n      er.script = cmd\n      er.pkgname = pkg.name\n      return cb(er)\n    } else if (er) {\n      log.error(pkg._id+\".\"+stage, er)\n      log.error(pkg._id+\".\"+stage, \"continuing anyway\")\n      return cb()\n    }\n    cb(er)\n  }\n}\n\n\nfunction runHookLifecycle (pkg, env, wd, unsafe, cb) {\n  // check for a hook script, run if present.\n  var stage = env.npm_lifecycle_event\n    , hook = path.join(npm.dir, \".hooks\", stage)\n    , user = unsafe ? null : npm.config.get(\"user\")\n    , group = unsafe ? null : npm.config.get(\"group\")\n    , cmd = hook\n\n  fs.stat(hook, function (er) {\n    if (er) return cb()\n    var note = \"\\n> \" + pkg._id + \" \" + stage + \" \" + wd\n             + \"\\n> \" + cmd\n    runCmd(note, hook, pkg, env, stage, wd, unsafe, cb)\n  })\n}\n\nfunction makeEnv (data, prefix, env) {\n  prefix = prefix || \"npm_package_\"\n  if (!env) {\n    env = {}\n    for (var i in process.env) if (!i.match(/^npm_/)) {\n      env[i] = process.env[i]\n    }\n\n    // npat asks for tap output\n    if (npm.config.get(\"npat\")) env.TAP = 1\n\n    // express and others respect the NODE_ENV value.\n    if (npm.config.get(\"production\")) env.NODE_ENV = \"production\"\n\n  } else if (!data.hasOwnProperty(\"_lifecycleEnv\")) {\n    Object.defineProperty(data, \"_lifecycleEnv\",\n      { value : env\n      , enumerable : false\n      })\n  }\n\n  for (var i in data) if (i.charAt(0) !== \"_\") {\n    var envKey = (prefix+i).replace(/[^a-zA-Z0-9_]/g, '_')\n    if (i === \"readme\") {\n      continue\n    }\n    if (data[i] && typeof(data[i]) === \"object\") {\n      try {\n        // quick and dirty detection for cyclical structures\n        JSON.stringify(data[i])\n        makeEnv(data[i], envKey+\"_\", env)\n      } catch (ex) {\n        // usually these are package objects.\n        // just get the path and basic details.\n        var d = data[i]\n        makeEnv( { name: d.name, version: d.version, path:d.path }\n               , envKey+\"_\", env)\n      }\n    } else {\n      env[envKey] = String(data[i])\n      env[envKey] = -1 !== env[envKey].indexOf(\"\\n\")\n                  ? JSON.stringify(env[envKey])\n                  : env[envKey]\n    }\n\n  }\n\n  if (prefix !== \"npm_package_\") return env\n\n  prefix = \"npm_config_\"\n  var pkgConfig = {}\n    , keys = npm.config.keys\n    , pkgVerConfig = {}\n    , namePref = data.name + \":\"\n    , verPref = data.name + \"@\" + data.version + \":\"\n\n  keys.forEach(function (i) {\n    if (i.charAt(0) === \"_\" && i.indexOf(\"_\"+namePref) !== 0) {\n      return\n    }\n    var value = npm.config.get(i)\n    if (value instanceof Stream || Array.isArray(value)) return\n    if (i.match(/umask/)) value = umask.toString(value)\n    if (!value) value = \"\"\n    else if (typeof value === \"number\") value = \"\" + value\n    else if (typeof value !== \"string\") value = JSON.stringify(value)\n\n    value = -1 !== value.indexOf(\"\\n\")\n          ? JSON.stringify(value)\n          : value\n    i = i.replace(/^_+/, \"\")\n    if (i.indexOf(namePref) === 0) {\n      var k = i.substr(namePref.length).replace(/[^a-zA-Z0-9_]/g, \"_\")\n      pkgConfig[ k ] = value\n    } else if (i.indexOf(verPref) === 0) {\n      var k = i.substr(verPref.length).replace(/[^a-zA-Z0-9_]/g, \"_\")\n      pkgVerConfig[ k ] = value\n    }\n    var envKey = (prefix+i).replace(/[^a-zA-Z0-9_]/g, \"_\")\n    env[envKey] = value\n  })\n\n  prefix = \"npm_package_config_\"\n  ;[pkgConfig, pkgVerConfig].forEach(function (conf) {\n    for (var i in conf) {\n      var envKey = (prefix+i)\n      env[envKey] = conf[i]\n    }\n  })\n\n  return env\n}\n\nfunction cmd (stage) {\n  function CMD (args, cb) {\n    npm.commands[\"run-script\"]([stage].concat(args), cb)\n  }\n  CMD.usage = \"npm \"+stage+\" [-- <args>]\"\n  var installedShallow = require(\"./completion/installed-shallow.js\")\n  CMD.completion = function (opts, cb) {\n    installedShallow(opts, function (d) {\n      return d.scripts && d.scripts[stage]\n    }, cb)\n  }\n  return CMD\n}\n"]}
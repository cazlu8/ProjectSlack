{"version":3,"sources":["add-remote-git.js"],"names":[],"mappings":"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","file":"add-remote-git-compiled.js","sourcesContent":["var assert = require('assert')\nvar crypto = require('crypto')\nvar fs = require('graceful-fs')\nvar path = require('path')\nvar url = require('url')\n\nvar chownr = require('chownr')\nvar dezalgo = require('dezalgo')\nvar hostedFromURL = require('hosted-git-info').fromUrl\nvar inflight = require('inflight')\nvar log = require('npmlog')\nvar mkdir = require('mkdirp')\nvar normalizeGitUrl = require('normalize-git-url')\nvar npa = require('npm-package-arg')\nvar realizePackageSpecifier = require('realize-package-specifier')\n\nvar addLocal = require('./add-local.js')\nvar getCacheStat = require('./get-stat.js')\nvar git = require('../utils/git.js')\nvar npm = require('../npm.js')\nvar rm = require('../utils/gently-rm.js')\n\nvar remotes = path.resolve(npm.config.get('cache'), '_git-remotes')\nvar templates = path.join(remotes, '_templates')\n\nvar VALID_VARIABLES = [\n  'GIT_ASKPASS',\n  'GIT_PROXY_COMMAND',\n  'GIT_SSH',\n  'GIT_SSL_CAINFO',\n  'GIT_SSL_NO_VERIFY'\n]\n\nmodule.exports = addRemoteGit\nfunction addRemoteGit (uri, _cb) {\n  assert(typeof uri === 'string', 'must have git URL')\n  assert(typeof _cb === 'function', 'must have callback')\n  var cb = dezalgo(_cb)\n\n  log.verbose('addRemoteGit', 'caching', uri)\n\n  // the URL comes in exactly as it was passed on the command line, or as\n  // normalized by normalize-package-data / read-package-json / read-installed,\n  // so figure out what to do with it using hosted-git-info\n  var parsed = hostedFromURL(uri)\n  if (parsed) {\n    // normalize GitHub syntax to org/repo (for now)\n    var from\n    if (parsed.type === 'github' && parsed.default === 'shortcut') {\n      from = parsed.path()\n    } else {\n      from = parsed.toString()\n    }\n\n    log.verbose('addRemoteGit', from, 'is a repository hosted by', parsed.type)\n\n    // prefer explicit URLs to pushing everything through shortcuts\n    if (parsed.default !== 'shortcut') {\n      return tryClone(from, parsed.toString(), false, cb)\n    }\n\n    // try git:, then git+ssh:, then git+https: before failing\n    tryGitProto(from, parsed, cb)\n  } else {\n    // verify that this is a Git URL before continuing\n    parsed = npa(uri)\n    if (parsed.type !== 'git') {\n      return cb(new Error(uri + 'is not a Git or GitHub URL'))\n    }\n\n    tryClone(parsed.rawSpec, uri, false, cb)\n  }\n}\n\nfunction tryGitProto (from, hostedInfo, cb) {\n  var gitURL = hostedInfo.git()\n  if (!gitURL) return trySSH(from, hostedInfo, cb)\n\n  log.silly('tryGitProto', 'attempting to clone', gitURL)\n  tryClone(from, gitURL, true, function (er) {\n    if (er) return tryHTTPS(from, hostedInfo, cb)\n\n    cb.apply(this, arguments)\n  })\n}\n\nfunction tryHTTPS (from, hostedInfo, cb) {\n  var httpsURL = hostedInfo.https()\n  if (!httpsURL) {\n    return cb(new Error(from + ' can not be cloned via Git, SSH, or HTTPS'))\n  }\n\n  log.silly('tryHTTPS', 'attempting to clone', httpsURL)\n  tryClone(from, httpsURL, true, function (er) {\n    if (er) return trySSH(from, hostedInfo, cb)\n\n    cb.apply(this, arguments)\n  })\n}\n\nfunction trySSH (from, hostedInfo, cb) {\n  var sshURL = hostedInfo.ssh()\n  if (!sshURL) return tryHTTPS(from, hostedInfo, cb)\n\n  log.silly('trySSH', 'attempting to clone', sshURL)\n  tryClone(from, sshURL, false, cb)\n}\n\nfunction tryClone (from, combinedURL, silent, cb) {\n  log.silly('tryClone', 'cloning', from, 'via', combinedURL)\n\n  var normalized = normalizeGitUrl(combinedURL)\n  var cloneURL = normalized.url\n  var treeish = normalized.branch\n\n  // ensure that similarly-named remotes don't collide\n  var repoID = cloneURL.replace(/[^a-zA-Z0-9]+/g, '-') + '-' +\n    crypto.createHash('sha1').update(combinedURL).digest('hex').slice(0, 8)\n  var cachedRemote = path.join(remotes, repoID)\n\n  cb = inflight(repoID, cb)\n  if (!cb) {\n    return log.verbose('tryClone', repoID, 'already in flight; waiting')\n  }\n  log.verbose('tryClone', repoID, 'not in flight; caching')\n\n  // initialize the remotes cache with the correct perms\n  getGitDir(function (er) {\n    if (er) return cb(er)\n    fs.stat(cachedRemote, function (er, s) {\n      if (er) return mirrorRemote(from, cloneURL, treeish, cachedRemote, silent, finish)\n      if (!s.isDirectory()) return resetRemote(from, cloneURL, treeish, cachedRemote, finish)\n\n      validateExistingRemote(from, cloneURL, treeish, cachedRemote, finish)\n    })\n\n    // always set permissions on the cached remote\n    function finish (er, data) {\n      if (er) return cb(er, data)\n      addModeRecursive(cachedRemote, npm.modes.file, function (er) {\n        return cb(er, data)\n      })\n    }\n  })\n}\n\n// don't try too hard to hold on to a remote\nfunction resetRemote (from, cloneURL, treeish, cachedRemote, cb) {\n  log.info('resetRemote', 'resetting', cachedRemote, 'for', from)\n  rm(cachedRemote, function (er) {\n    if (er) return cb(er)\n    mirrorRemote(from, cloneURL, treeish, cachedRemote, false, cb)\n  })\n}\n\n// reuse a cached remote when possible, but nuke it if it's in an\n// inconsistent state\nfunction validateExistingRemote (from, cloneURL, treeish, cachedRemote, cb) {\n  git.whichAndExec(\n    ['config', '--get', 'remote.origin.url'],\n    { cwd: cachedRemote, env: gitEnv() },\n    function (er, stdout, stderr) {\n      var originURL\n      if (stdout) {\n        originURL = stdout.trim()\n        log.silly('validateExistingRemote', from, 'remote.origin.url:', originURL)\n      }\n\n      if (stderr) stderr = stderr.trim()\n      if (stderr || er) {\n        log.warn('addRemoteGit', from, 'resetting remote', cachedRemote, 'because of error:', stderr || er)\n        return resetRemote(from, cloneURL, treeish, cachedRemote, cb)\n      } else if (cloneURL !== originURL) {\n        log.warn(\n          'addRemoteGit',\n          from,\n          'pre-existing cached repo', cachedRemote, 'points to', originURL, 'and not', cloneURL\n        )\n        return resetRemote(from, cloneURL, treeish, cachedRemote, cb)\n      }\n\n      log.verbose('validateExistingRemote', from, 'is updating existing cached remote', cachedRemote)\n      updateRemote(from, cloneURL, treeish, cachedRemote, cb)\n    }\n  )\n}\n\n// make a complete bare mirror of the remote repo\n// NOTE: npm uses a blank template directory to prevent weird inconsistencies\n// https://github.com/npm/npm/issues/5867\nfunction mirrorRemote (from, cloneURL, treeish, cachedRemote, silent, cb) {\n  mkdir(cachedRemote, function (er) {\n    if (er) return cb(er)\n\n    var args = [\n      'clone',\n      '--template=' + templates,\n      '--mirror',\n      cloneURL, cachedRemote\n    ]\n    git.whichAndExec(\n      ['clone', '--template=' + templates, '--mirror', cloneURL, cachedRemote],\n      { cwd: cachedRemote, env: gitEnv() },\n      function (er, stdout, stderr) {\n        if (er) {\n          var combined = (stdout + '\\n' + stderr).trim()\n          var command = 'git ' + args.join(' ') + ':'\n          if (silent) {\n            log.verbose(command, combined)\n          } else {\n            log.error(command, combined)\n          }\n          return cb(er)\n        }\n        log.verbose('mirrorRemote', from, 'git clone ' + cloneURL, stdout.trim())\n        setPermissions(from, cloneURL, treeish, cachedRemote, cb)\n      }\n    )\n  })\n}\n\nfunction setPermissions (from, cloneURL, treeish, cachedRemote, cb) {\n  if (process.platform === 'win32') {\n    log.verbose('setPermissions', from, 'skipping chownr on Windows')\n    resolveHead(from, cloneURL, treeish, cachedRemote, cb)\n  } else {\n    getGitDir(function (er, cs) {\n      if (er) {\n        log.error('setPermissions', from, 'could not get cache stat')\n        return cb(er)\n      }\n\n      chownr(cachedRemote, cs.uid, cs.gid, function (er) {\n        if (er) {\n          log.error(\n            'setPermissions',\n            'Failed to change git repository ownership under npm cache for',\n            cachedRemote\n          )\n          return cb(er)\n        }\n\n        log.verbose('setPermissions', from, 'set permissions on', cachedRemote)\n        resolveHead(from, cloneURL, treeish, cachedRemote, cb)\n      })\n    })\n  }\n}\n\n// always fetch the origin, even right after mirroring, because this way\n// permissions will get set correctly\nfunction updateRemote (from, cloneURL, treeish, cachedRemote, cb) {\n  git.whichAndExec(\n    ['fetch', '-a', 'origin'],\n    { cwd: cachedRemote, env: gitEnv() },\n    function (er, stdout, stderr) {\n      if (er) {\n        var combined = (stdout + '\\n' + stderr).trim()\n        log.error('git fetch -a origin (' + cloneURL + ')', combined)\n        return cb(er)\n      }\n      log.verbose('updateRemote', 'git fetch -a origin (' + cloneURL + ')', stdout.trim())\n\n      setPermissions(from, cloneURL, treeish, cachedRemote, cb)\n    }\n  )\n}\n\n// branches and tags are both symbolic labels that can be attached to different\n// commits, so resolve the commit-ish to the current actual treeish the label\n// corresponds to\n//\n// important for shrinkwrap\nfunction resolveHead (from, cloneURL, treeish, cachedRemote, cb) {\n  log.verbose('resolveHead', from, 'original treeish:', treeish)\n  var args = ['rev-list', '-n1', treeish]\n  git.whichAndExec(\n    args,\n    { cwd: cachedRemote, env: gitEnv() },\n    function (er, stdout, stderr) {\n      if (er) {\n        log.error('git ' + args.join(' ') + ':', stderr)\n        return cb(er)\n      }\n\n      var resolvedTreeish = stdout.trim()\n      log.silly('resolveHead', from, 'resolved treeish:', resolvedTreeish)\n\n      var resolvedURL = getResolved(cloneURL, resolvedTreeish)\n      if (!resolvedURL) {\n        return cb(new Error(\n          'unable to clone ' + from + ' because git clone string ' +\n            cloneURL + ' is in a form npm can\\'t handle'\n        ))\n      }\n      log.verbose('resolveHead', from, 'resolved Git URL:', resolvedURL)\n\n      // generate a unique filename\n      var tmpdir = path.join(\n        npm.tmp,\n        'git-cache-' + crypto.pseudoRandomBytes(6).toString('hex'),\n        resolvedTreeish\n      )\n      log.silly('resolveHead', 'Git working directory:', tmpdir)\n\n      mkdir(tmpdir, function (er) {\n        if (er) return cb(er)\n\n        cloneResolved(from, resolvedURL, resolvedTreeish, cachedRemote, tmpdir, cb)\n      })\n    }\n  )\n}\n\n// make a clone from the mirrored cache so we have a temporary directory in\n// which we can check out the resolved treeish\nfunction cloneResolved (from, resolvedURL, resolvedTreeish, cachedRemote, tmpdir, cb) {\n  var args = ['clone', cachedRemote, tmpdir]\n  git.whichAndExec(\n    args,\n    { cwd: cachedRemote, env: gitEnv() },\n    function (er, stdout, stderr) {\n      stdout = (stdout + '\\n' + stderr).trim()\n      if (er) {\n        log.error('git ' + args.join(' ') + ':', stderr)\n        return cb(er)\n      }\n      log.verbose('cloneResolved', from, 'clone', stdout)\n\n      checkoutTreeish(from, resolvedURL, resolvedTreeish, tmpdir, cb)\n    }\n  )\n}\n\n// there is no safe way to do a one-step clone to a treeish that isn't\n// guaranteed to be a branch, so explicitly check out the treeish once it's\n// cloned\nfunction checkoutTreeish (from, resolvedURL, resolvedTreeish, tmpdir, cb) {\n  var args = ['checkout', resolvedTreeish]\n  git.whichAndExec(\n    args,\n    { cwd: tmpdir, env: gitEnv() },\n    function (er, stdout, stderr) {\n      stdout = (stdout + '\\n' + stderr).trim()\n      if (er) {\n        log.error('git ' + args.join(' ') + ':', stderr)\n        return cb(er)\n      }\n      log.verbose('checkoutTreeish', from, 'checkout', stdout)\n\n      // convince addLocal that the checkout is a local dependency\n      realizePackageSpecifier(tmpdir, function (er, spec) {\n        if (er) {\n          log.error('addRemoteGit', 'Failed to map', tmpdir, 'to a package specifier')\n          return cb(er)\n        }\n\n        // ensure pack logic is applied\n        // https://github.com/npm/npm/issues/6400\n        addLocal(spec, null, function (er, data) {\n          if (data) {\n            if (npm.config.get('save-exact')) {\n              log.verbose('addRemoteGit', 'data._from:', resolvedURL, '(save-exact)')\n              data._from = resolvedURL\n            } else {\n              log.verbose('addRemoteGit', 'data._from:', from)\n              data._from = from\n            }\n\n            log.verbose('addRemoteGit', 'data._resolved:', resolvedURL)\n            data._resolved = resolvedURL\n          }\n\n          cb(er, data)\n        })\n      })\n    }\n  )\n}\n\nfunction getGitDir (cb) {\n  getCacheStat(function (er, stats) {\n    if (er) return cb(er)\n\n    // We don't need global templates when cloning. Use an empty directory for\n    // the templates, creating it (and setting its permissions) if necessary.\n    mkdir(templates, function (er) {\n      if (er) return cb(er)\n\n      // Ensure that both the template and remotes directories have the correct\n      // permissions.\n      fs.chown(templates, stats.uid, stats.gid, function (er) {\n        if (er) return cb(er)\n\n        fs.chown(remotes, stats.uid, stats.gid, function (er) {\n          cb(er, stats)\n        })\n      })\n    })\n  })\n}\n\nvar gitEnv_\nfunction gitEnv () {\n  // git responds to env vars in some weird ways in post-receive hooks\n  // so don't carry those along.\n  if (gitEnv_) return gitEnv_\n\n  // allow users to override npm's insistence on not prompting for\n  // passphrases, but default to just failing when credentials\n  // aren't available\n  gitEnv_ = { GIT_ASKPASS: 'echo' }\n\n  for (var k in process.env) {\n    if (!~VALID_VARIABLES.indexOf(k) && k.match(/^GIT/)) continue\n    gitEnv_[k] = process.env[k]\n  }\n  return gitEnv_\n}\n\naddRemoteGit.getResolved = getResolved\nfunction getResolved (uri, treeish) {\n  // normalize hosted-git-info clone URLs back into regular URLs\n  // this will only work on URLs that hosted-git-info recognizes\n  // https://github.com/npm/npm/issues/7961\n  var rehydrated = hostedFromURL(uri)\n  if (rehydrated) uri = rehydrated.toString()\n\n  var parsed = url.parse(uri)\n\n  // non-hosted SSH strings that are not URLs (git@whatever.com:foo.git) are\n  // no bueno\n  // https://github.com/npm/npm/issues/7961\n  if (!parsed.protocol) return\n\n  parsed.hash = treeish\n  if (!/^git[+:]/.test(parsed.protocol)) {\n    parsed.protocol = 'git+' + parsed.protocol\n  }\n\n  // node incorrectly sticks a / at the start of the path We know that the host\n  // won't change, so split and detect this\n  // https://github.com/npm/npm/issues/3224\n  var spo = uri.split(parsed.host)\n  var spr = url.format(parsed).split(parsed.host)\n  if (spo[1] && spo[1].charAt(0) === ':' && spr[1] && spr[1].charAt(0) === '/') {\n    spr[1] = spr[1].slice(1)\n  }\n  return spr.join(parsed.host)\n}\n\n// similar to chmodr except it add permissions rather than overwriting them\n// adapted from https://github.com/isaacs/chmodr/blob/master/chmodr.js\nfunction addModeRecursive (cachedRemote, mode, cb) {\n  fs.readdir(cachedRemote, function (er, children) {\n    // Any error other than ENOTDIR means it's not readable, or doesn't exist.\n    // Give up.\n    if (er && er.code !== 'ENOTDIR') return cb(er)\n    if (er || !children.length) return addMode(cachedRemote, mode, cb)\n\n    var len = children.length\n    var errState = null\n    children.forEach(function (child) {\n      addModeRecursive(path.resolve(cachedRemote, child), mode, then)\n    })\n\n    function then (er) {\n      if (errState) return undefined\n      if (er) return cb(errState = er)\n      if (--len === 0) return addMode(cachedRemote, dirMode(mode), cb)\n    }\n  })\n}\n\nfunction addMode (cachedRemote, mode, cb) {\n  fs.stat(cachedRemote, function (er, stats) {\n    if (er) return cb(er)\n    mode = stats.mode | mode\n    fs.chmod(cachedRemote, mode, cb)\n  })\n}\n\n// taken from https://github.com/isaacs/chmodr/blob/master/chmodr.js\nfunction dirMode (mode) {\n  if (mode & parseInt('0400', 8)) mode |= parseInt('0100', 8)\n  if (mode & parseInt('040', 8)) mode |= parseInt('010', 8)\n  if (mode & parseInt('04', 8)) mode |= parseInt('01', 8)\n  return mode\n}\n"]}
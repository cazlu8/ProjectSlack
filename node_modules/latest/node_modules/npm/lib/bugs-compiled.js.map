{"version":3,"sources":["bugs.js"],"names":[],"mappings":"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","file":"bugs-compiled.js","sourcesContent":["\nmodule.exports = bugs\n\nbugs.usage = \"npm bugs <pkgname>\"\n\nvar npm = require(\"./npm.js\")\n  , log = require(\"npmlog\")\n  , opener = require(\"opener\")\n  , path = require(\"path\")\n  , readJson = require(\"read-package-json\")\n  , npa = require(\"npm-package-arg\")\n  , fs = require(\"fs\")\n  , mapToRegistry = require(\"./utils/map-to-registry.js\")\n\nbugs.completion = function (opts, cb) {\n  // FIXME: there used to be registry completion here, but it stopped making\n  // sense somewhere around 50,000 packages on the registry\n  cb()\n}\n\nfunction bugs (args, cb) {\n  var n = args.length && npa(args[0]).name || \".\"\n  fs.stat(n, function (er, s) {\n    if (er) {\n      if (er.code === \"ENOENT\") return callRegistry(n, cb)\n      return cb(er)\n    }\n    if (!s.isDirectory()) return callRegistry(n, cb)\n    readJson(path.resolve(n, \"package.json\"), function(er, d) {\n      if (er) return cb(er)\n      getUrlAndOpen(d, cb)\n    })\n  })\n}\n\nfunction getUrlAndOpen (d, cb) {\n  var repo = d.repository || d.repositories\n    , url\n  if (d.bugs) {\n    url = (typeof d.bugs === \"string\") ? d.bugs : d.bugs.url\n  }\n  else if (repo) {\n    if (Array.isArray(repo)) repo = repo.shift()\n    if (repo.hasOwnProperty(\"url\")) repo = repo.url\n    log.verbose(\"bugs\", \"repository\", repo)\n    if (repo && repo.match(/^(https?:\\/\\/|git(:\\/\\/|@))github.com/)) {\n      url = repo.replace(/^git(@|:\\/\\/)/, \"https://\")\n                .replace(/^https?:\\/\\/github.com:/, \"https://github.com/\")\n                .replace(/\\.git$/, \"\")+\"/issues\"\n    }\n  }\n  if (!url) {\n    url = \"https://www.npmjs.org/package/\" + d.name\n  }\n  log.silly(\"bugs\", \"url\", url)\n  opener(url, { command: npm.config.get(\"browser\") }, cb)\n}\n\nfunction callRegistry (name, cb) {\n  mapToRegistry(name, npm.config, function (er, uri, auth) {\n    if (er) return cb(er)\n\n    npm.registry.get(uri + \"/latest\", { auth : auth }, function (er, d) {\n      if (er) return cb(er)\n\n      getUrlAndOpen(d, cb)\n    })\n  })\n}\n"]}
{"version":3,"sources":["foreach.js"],"names":[],"mappings":"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","file":"foreach-compiled.js","sourcesContent":["var test = require('tap').test\nvar LRU = require('../')\n\ntest('forEach', function (t) {\n  var l = new LRU(5)\n  for (var i = 0; i < 10; i ++) {\n    l.set(i.toString(), i.toString(2))\n  }\n\n  var i = 9\n  l.forEach(function (val, key, cache) {\n    t.equal(cache, l)\n    t.equal(key, i.toString())\n    t.equal(val, i.toString(2))\n    i -= 1\n  })\n\n  // get in order of most recently used\n  l.get(6)\n  l.get(8)\n\n  var order = [ 8, 6, 9, 7, 5 ]\n  var i = 0\n\n  l.forEach(function (val, key, cache) {\n    var j = order[i ++]\n    t.equal(cache, l)\n    t.equal(key, j.toString())\n    t.equal(val, j.toString(2))\n  })\n  t.equal(i, order.length);\n\n  t.end()\n})\n\ntest('keys() and values()', function (t) {\n  var l = new LRU(5)\n  for (var i = 0; i < 10; i ++) {\n    l.set(i.toString(), i.toString(2))\n  }\n\n  t.similar(l.keys(), ['9', '8', '7', '6', '5'])\n  t.similar(l.values(), ['1001', '1000', '111', '110', '101'])\n\n  // get in order of most recently used\n  l.get(6)\n  l.get(8)\n\n  t.similar(l.keys(), ['8', '6', '9', '7', '5'])\n  t.similar(l.values(), ['1000', '110', '1001', '111', '101'])\n\n  t.end()\n})\n\ntest('all entries are iterated over', function(t) {\n  var l = new LRU(5)\n  for (var i = 0; i < 10; i ++) {\n    l.set(i.toString(), i.toString(2))\n  }\n\n  var i = 0\n  l.forEach(function (val, key, cache) {\n    if (i > 0) {\n      cache.del(key)\n    }\n    i += 1\n  })\n\n  t.equal(i, 5)\n  t.equal(l.keys().length, 1)\n\n  t.end()\n})\n\ntest('all stale entries are removed', function(t) {\n  var l = new LRU({ max: 5, maxAge: -5, stale: true })\n  for (var i = 0; i < 10; i ++) {\n    l.set(i.toString(), i.toString(2))\n  }\n\n  var i = 0\n  l.forEach(function () {\n    i += 1\n  })\n\n  t.equal(i, 5)\n  t.equal(l.keys().length, 0)\n\n  t.end()\n})\n\ntest('expires', function (t) {\n  var l = new LRU({\n    max: 10,\n    maxAge: 50\n  })\n  for (var i = 0; i < 10; i++) {\n    l.set(i.toString(), i.toString(2), ((i % 2) ? 25 : undefined))\n  }\n\n  var i = 0\n  var order = [ 8, 6, 4, 2, 0 ]\n  setTimeout(function () {\n    l.forEach(function (val, key, cache) {\n      var j = order[i++]\n      t.equal(cache, l)\n      t.equal(key, j.toString())\n      t.equal(val, j.toString(2))\n    })\n    t.equal(i, order.length);\n    t.end()\n\n    setTimeout(function () {\n      var count = 0;\n      l.forEach(function (val, key, cache) { count++; })\n      t.equal(0, count);\n      t.end()\n    }, 25)\n\n  }, 26)\n})\n"]}
{"version":3,"sources":["repl.js"],"names":[],"mappings":"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","file":"repl-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.3.3\n(function() {\n  var ACCESSOR, CoffeeScript, Module, REPL_PROMPT, REPL_PROMPT_CONTINUATION, REPL_PROMPT_MULTILINE, SIMPLEVAR, Script, autocomplete, backlog, completeAttribute, completeVariable, enableColours, error, getCompletions, inspect, multilineMode, pipedInput, readline, repl, run, stdin, stdout;\n\n  stdin = process.openStdin();\n\n  stdout = process.stdout;\n\n  CoffeeScript = require('./coffee-script');\n\n  readline = require('readline');\n\n  inspect = require('util').inspect;\n\n  Script = require('vm').Script;\n\n  Module = require('module');\n\n  REPL_PROMPT = 'coffee> ';\n\n  REPL_PROMPT_MULTILINE = '------> ';\n\n  REPL_PROMPT_CONTINUATION = '......> ';\n\n  enableColours = false;\n\n  if (process.platform !== 'win32') {\n    enableColours = !process.env.NODE_DISABLE_COLORS;\n  }\n\n  error = function(err) {\n    return stdout.write((err.stack || err.toString()) + '\\n');\n  };\n\n  ACCESSOR = /\\s*([\\w\\.]+)(?:\\.(\\w*))$/;\n\n  SIMPLEVAR = /(\\w+)$/i;\n\n  autocomplete = function(text) {\n    return completeAttribute(text) || completeVariable(text) || [[], text];\n  };\n\n  completeAttribute = function(text) {\n    var all, completions, key, match, obj, possibilities, prefix, val;\n    if (match = text.match(ACCESSOR)) {\n      all = match[0], obj = match[1], prefix = match[2];\n      try {\n        val = Script.runInThisContext(obj);\n      } catch (error) {\n        return;\n      }\n      val = Object(val);\n      possibilities = Object.getOwnPropertyNames(val);\n      for (key in val) {\n        if (~possibilities.indexOf(val)) {\n          possibilities.push(key);\n        }\n      }\n      completions = getCompletions(prefix, possibilities);\n      return [completions, prefix];\n    }\n  };\n\n  completeVariable = function(text) {\n    var completions, free, keywords, possibilities, r, vars, _ref;\n    free = (_ref = text.match(SIMPLEVAR)) != null ? _ref[1] : void 0;\n    if (text === \"\") {\n      free = \"\";\n    }\n    if (free != null) {\n      vars = Script.runInThisContext('Object.getOwnPropertyNames(Object(this))');\n      keywords = (function() {\n        var _i, _len, _ref1, _results;\n        _ref1 = CoffeeScript.RESERVED;\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          r = _ref1[_i];\n          if (r.slice(0, 2) !== '__') {\n            _results.push(r);\n          }\n        }\n        return _results;\n      })();\n      possibilities = vars.concat(keywords);\n      completions = getCompletions(free, possibilities);\n      return [completions, free];\n    }\n  };\n\n  getCompletions = function(prefix, candidates) {\n    var el, _i, _len, _results;\n    _results = [];\n    for (_i = 0, _len = candidates.length; _i < _len; _i++) {\n      el = candidates[_i];\n      if (el.indexOf(prefix) === 0) {\n        _results.push(el);\n      }\n    }\n    return _results;\n  };\n\n  process.on('uncaughtException', error);\n\n  backlog = '';\n\n  run = function(buffer) {\n    var code, returnValue, _;\n    buffer = buffer.replace(/(^|[\\r\\n]+)(\\s*)##?(?:[^#\\r\\n][^\\r\\n]*|)($|[\\r\\n])/, \"$1$2$3\");\n    buffer = buffer.replace(/[\\r\\n]+$/, \"\");\n    if (multilineMode) {\n      backlog += \"\" + buffer + \"\\n\";\n      repl.setPrompt(REPL_PROMPT_CONTINUATION);\n      repl.prompt();\n      return;\n    }\n    if (!buffer.toString().trim() && !backlog) {\n      repl.prompt();\n      return;\n    }\n    code = backlog += buffer;\n    if (code[code.length - 1] === '\\\\') {\n      backlog = \"\" + backlog.slice(0, -1) + \"\\n\";\n      repl.setPrompt(REPL_PROMPT_CONTINUATION);\n      repl.prompt();\n      return;\n    }\n    repl.setPrompt(REPL_PROMPT);\n    backlog = '';\n    try {\n      _ = global._;\n      returnValue = CoffeeScript[\"eval\"](\"_=(\" + code + \"\\n)\", {\n        filename: 'repl',\n        modulename: 'repl'\n      });\n      if (returnValue === void 0) {\n        global._ = _;\n      }\n      repl.output.write(\"\" + (inspect(returnValue, false, 2, enableColours)) + \"\\n\");\n    } catch (err) {\n      error(err);\n    }\n    return repl.prompt();\n  };\n\n  if (stdin.readable) {\n    pipedInput = '';\n    repl = {\n      prompt: function() {\n        return stdout.write(this._prompt);\n      },\n      setPrompt: function(p) {\n        return this._prompt = p;\n      },\n      input: stdin,\n      output: stdout,\n      on: function() {}\n    };\n    stdin.on('data', function(chunk) {\n      var line, lines, _i, _len, _ref;\n      pipedInput += chunk;\n      if (!/\\n/.test(pipedInput)) {\n        return;\n      }\n      lines = pipedInput.split(\"\\n\");\n      pipedInput = lines[lines.length - 1];\n      _ref = lines.slice(0, -1);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        line = _ref[_i];\n        if (!(line)) {\n          continue;\n        }\n        stdout.write(\"\" + line + \"\\n\");\n        run(line);\n      }\n    });\n    stdin.on('end', function() {\n      var line, _i, _len, _ref;\n      _ref = pipedInput.trim().split(\"\\n\");\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        line = _ref[_i];\n        if (!(line)) {\n          continue;\n        }\n        stdout.write(\"\" + line + \"\\n\");\n        run(line);\n      }\n      stdout.write('\\n');\n      return process.exit(0);\n    });\n  } else {\n    if (readline.createInterface.length < 3) {\n      repl = readline.createInterface(stdin, autocomplete);\n      stdin.on('data', function(buffer) {\n        return repl.write(buffer);\n      });\n    } else {\n      repl = readline.createInterface(stdin, stdout, autocomplete);\n    }\n  }\n\n  multilineMode = false;\n\n  repl.input.on('keypress', function(char, key) {\n    var cursorPos, newPrompt;\n    if (!(key && key.ctrl && !key.meta && !key.shift && key.name === 'v')) {\n      return;\n    }\n    cursorPos = repl.cursor;\n    repl.output.cursorTo(0);\n    repl.output.clearLine(1);\n    multilineMode = !multilineMode;\n    if (!multilineMode && backlog) {\n      repl._line();\n    }\n    backlog = '';\n    repl.setPrompt((newPrompt = multilineMode ? REPL_PROMPT_MULTILINE : REPL_PROMPT));\n    repl.prompt();\n    return repl.output.cursorTo(newPrompt.length + (repl.cursor = cursorPos));\n  });\n\n  repl.input.on('keypress', function(char, key) {\n    if (!(multilineMode && repl.line)) {\n      return;\n    }\n    if (!(key && key.ctrl && !key.meta && !key.shift && key.name === 'd')) {\n      return;\n    }\n    multilineMode = false;\n    return repl._line();\n  });\n\n  repl.on('attemptClose', function() {\n    if (multilineMode) {\n      multilineMode = false;\n      repl.output.cursorTo(0);\n      repl.output.clearLine(1);\n      repl._onLine(repl.line);\n      return;\n    }\n    if (backlog) {\n      backlog = '';\n      repl.output.write('\\n');\n      repl.setPrompt(REPL_PROMPT);\n      return repl.prompt();\n    } else {\n      return repl.close();\n    }\n  });\n\n  repl.on('close', function() {\n    repl.output.write('\\n');\n    return repl.input.destroy();\n  });\n\n  repl.on('line', run);\n\n  repl.setPrompt(REPL_PROMPT);\n\n  repl.prompt();\n\n}).call(this);\n"]}
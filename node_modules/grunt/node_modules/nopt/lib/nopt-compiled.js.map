{"version":3,"sources":["nopt.js"],"names":[],"mappings":"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","file":"nopt-compiled.js","sourcesContent":["// info about each config option.\n\nvar debug = process.env.DEBUG_NOPT || process.env.NOPT_DEBUG\n  ? function () { console.error.apply(console, arguments) }\n  : function () {}\n\nvar url = require(\"url\")\n  , path = require(\"path\")\n  , Stream = require(\"stream\").Stream\n  , abbrev = require(\"abbrev\")\n\nmodule.exports = exports = nopt\nexports.clean = clean\n\nexports.typeDefs =\n  { String  : { type: String,  validate: validateString  }\n  , Boolean : { type: Boolean, validate: validateBoolean }\n  , url     : { type: url,     validate: validateUrl     }\n  , Number  : { type: Number,  validate: validateNumber  }\n  , path    : { type: path,    validate: validatePath    }\n  , Stream  : { type: Stream,  validate: validateStream  }\n  , Date    : { type: Date,    validate: validateDate    }\n  }\n\nfunction nopt (types, shorthands, args, slice) {\n  args = args || process.argv\n  types = types || {}\n  shorthands = shorthands || {}\n  if (typeof slice !== \"number\") slice = 2\n\n  debug(types, shorthands, args, slice)\n\n  args = args.slice(slice)\n  var data = {}\n    , key\n    , remain = []\n    , cooked = args\n    , original = args.slice(0)\n\n  parse(args, data, remain, types, shorthands)\n  // now data is full\n  clean(data, types, exports.typeDefs)\n  data.argv = {remain:remain,cooked:cooked,original:original}\n  data.argv.toString = function () {\n    return this.original.map(JSON.stringify).join(\" \")\n  }\n  return data\n}\n\nfunction clean (data, types, typeDefs) {\n  typeDefs = typeDefs || exports.typeDefs\n  var remove = {}\n    , typeDefault = [false, true, null, String, Number]\n\n  Object.keys(data).forEach(function (k) {\n    if (k === \"argv\") return\n    var val = data[k]\n      , isArray = Array.isArray(val)\n      , type = types[k]\n    if (!isArray) val = [val]\n    if (!type) type = typeDefault\n    if (type === Array) type = typeDefault.concat(Array)\n    if (!Array.isArray(type)) type = [type]\n\n    debug(\"val=%j\", val)\n    debug(\"types=\", type)\n    val = val.map(function (val) {\n      // if it's an unknown value, then parse false/true/null/numbers/dates\n      if (typeof val === \"string\") {\n        debug(\"string %j\", val)\n        val = val.trim()\n        if ((val === \"null\" && ~type.indexOf(null))\n            || (val === \"true\" &&\n               (~type.indexOf(true) || ~type.indexOf(Boolean)))\n            || (val === \"false\" &&\n               (~type.indexOf(false) || ~type.indexOf(Boolean)))) {\n          val = JSON.parse(val)\n          debug(\"jsonable %j\", val)\n        } else if (~type.indexOf(Number) && !isNaN(val)) {\n          debug(\"convert to number\", val)\n          val = +val\n        } else if (~type.indexOf(Date) && !isNaN(Date.parse(val))) {\n          debug(\"convert to date\", val)\n          val = new Date(val)\n        }\n      }\n\n      if (!types.hasOwnProperty(k)) {\n        return val\n      }\n\n      // allow `--no-blah` to set 'blah' to null if null is allowed\n      if (val === false && ~type.indexOf(null) &&\n          !(~type.indexOf(false) || ~type.indexOf(Boolean))) {\n        val = null\n      }\n\n      var d = {}\n      d[k] = val\n      debug(\"prevalidated val\", d, val, types[k])\n      if (!validate(d, k, val, types[k], typeDefs)) {\n        if (exports.invalidHandler) {\n          exports.invalidHandler(k, val, types[k], data)\n        } else if (exports.invalidHandler !== false) {\n          debug(\"invalid: \"+k+\"=\"+val, types[k])\n        }\n        return remove\n      }\n      debug(\"validated val\", d, val, types[k])\n      return d[k]\n    }).filter(function (val) { return val !== remove })\n\n    if (!val.length) delete data[k]\n    else if (isArray) {\n      debug(isArray, data[k], val)\n      data[k] = val\n    } else data[k] = val[0]\n\n    debug(\"k=%s val=%j\", k, val, data[k])\n  })\n}\n\nfunction validateString (data, k, val) {\n  data[k] = String(val)\n}\n\nfunction validatePath (data, k, val) {\n  data[k] = path.resolve(String(val))\n  return true\n}\n\nfunction validateNumber (data, k, val) {\n  debug(\"validate Number %j %j %j\", k, val, isNaN(val))\n  if (isNaN(val)) return false\n  data[k] = +val\n}\n\nfunction validateDate (data, k, val) {\n  debug(\"validate Date %j %j %j\", k, val, Date.parse(val))\n  var s = Date.parse(val)\n  if (isNaN(s)) return false\n  data[k] = new Date(val)\n}\n\nfunction validateBoolean (data, k, val) {\n  if (val instanceof Boolean) val = val.valueOf()\n  else if (typeof val === \"string\") {\n    if (!isNaN(val)) val = !!(+val)\n    else if (val === \"null\" || val === \"false\") val = false\n    else val = true\n  } else val = !!val\n  data[k] = val\n}\n\nfunction validateUrl (data, k, val) {\n  val = url.parse(String(val))\n  if (!val.host) return false\n  data[k] = val.href\n}\n\nfunction validateStream (data, k, val) {\n  if (!(val instanceof Stream)) return false\n  data[k] = val\n}\n\nfunction validate (data, k, val, type, typeDefs) {\n  // arrays are lists of types.\n  if (Array.isArray(type)) {\n    for (var i = 0, l = type.length; i < l; i ++) {\n      if (type[i] === Array) continue\n      if (validate(data, k, val, type[i], typeDefs)) return true\n    }\n    delete data[k]\n    return false\n  }\n\n  // an array of anything?\n  if (type === Array) return true\n\n  // NaN is poisonous.  Means that something is not allowed.\n  if (type !== type) {\n    debug(\"Poison NaN\", k, val, type)\n    delete data[k]\n    return false\n  }\n\n  // explicit list of values\n  if (val === type) {\n    debug(\"Explicitly allowed %j\", val)\n    // if (isArray) (data[k] = data[k] || []).push(val)\n    // else data[k] = val\n    data[k] = val\n    return true\n  }\n\n  // now go through the list of typeDefs, validate against each one.\n  var ok = false\n    , types = Object.keys(typeDefs)\n  for (var i = 0, l = types.length; i < l; i ++) {\n    debug(\"test type %j %j %j\", k, val, types[i])\n    var t = typeDefs[types[i]]\n    if (t && type === t.type) {\n      var d = {}\n      ok = false !== t.validate(d, k, val)\n      val = d[k]\n      if (ok) {\n        // if (isArray) (data[k] = data[k] || []).push(val)\n        // else data[k] = val\n        data[k] = val\n        break\n      }\n    }\n  }\n  debug(\"OK? %j (%j %j %j)\", ok, k, val, types[i])\n\n  if (!ok) delete data[k]\n  return ok\n}\n\nfunction parse (args, data, remain, types, shorthands) {\n  debug(\"parse\", args, data, remain)\n\n  var key = null\n    , abbrevs = abbrev(Object.keys(types))\n    , shortAbbr = abbrev(Object.keys(shorthands))\n\n  for (var i = 0; i < args.length; i ++) {\n    var arg = args[i]\n    debug(\"arg\", arg)\n\n    if (arg.match(/^-{2,}$/)) {\n      // done with keys.\n      // the rest are args.\n      remain.push.apply(remain, args.slice(i + 1))\n      args[i] = \"--\"\n      break\n    }\n    if (arg.charAt(0) === \"-\") {\n      if (arg.indexOf(\"=\") !== -1) {\n        var v = arg.split(\"=\")\n        arg = v.shift()\n        v = v.join(\"=\")\n        args.splice.apply(args, [i, 1].concat([arg, v]))\n      }\n      // see if it's a shorthand\n      // if so, splice and back up to re-parse it.\n      var shRes = resolveShort(arg, shorthands, shortAbbr, abbrevs)\n      debug(\"arg=%j shRes=%j\", arg, shRes)\n      if (shRes) {\n        debug(arg, shRes)\n        args.splice.apply(args, [i, 1].concat(shRes))\n        if (arg !== shRes[0]) {\n          i --\n          continue\n        }\n      }\n      arg = arg.replace(/^-+/, \"\")\n      var no = false\n      while (arg.toLowerCase().indexOf(\"no-\") === 0) {\n        no = !no\n        arg = arg.substr(3)\n      }\n\n      if (abbrevs[arg]) arg = abbrevs[arg]\n\n      var isArray = types[arg] === Array ||\n        Array.isArray(types[arg]) && types[arg].indexOf(Array) !== -1\n\n      var val\n        , la = args[i + 1]\n\n      var isBool = no ||\n        types[arg] === Boolean ||\n        Array.isArray(types[arg]) && types[arg].indexOf(Boolean) !== -1 ||\n        (la === \"false\" &&\n         (types[arg] === null ||\n          Array.isArray(types[arg]) && ~types[arg].indexOf(null)))\n\n      if (isBool) {\n        // just set and move along\n        val = !no\n        // however, also support --bool true or --bool false\n        if (la === \"true\" || la === \"false\") {\n          val = JSON.parse(la)\n          la = null\n          if (no) val = !val\n          i ++\n        }\n\n        // also support \"foo\":[Boolean, \"bar\"] and \"--foo bar\"\n        if (Array.isArray(types[arg]) && la) {\n          if (~types[arg].indexOf(la)) {\n            // an explicit type\n            val = la\n            i ++\n          } else if ( la === \"null\" && ~types[arg].indexOf(null) ) {\n            // null allowed\n            val = null\n            i ++\n          } else if ( !la.match(/^-{2,}[^-]/) &&\n                      !isNaN(la) &&\n                      ~types[arg].indexOf(Number) ) {\n            // number\n            val = +la\n            i ++\n          } else if ( !la.match(/^-[^-]/) && ~types[arg].indexOf(String) ) {\n            // string\n            val = la\n            i ++\n          }\n        }\n\n        if (isArray) (data[arg] = data[arg] || []).push(val)\n        else data[arg] = val\n\n        continue\n      }\n\n      if (la && la.match(/^-{2,}$/)) {\n        la = undefined\n        i --\n      }\n\n      val = la === undefined ? true : la\n      if (isArray) (data[arg] = data[arg] || []).push(val)\n      else data[arg] = val\n\n      i ++\n      continue\n    }\n    remain.push(arg)\n  }\n}\n\nfunction resolveShort (arg, shorthands, shortAbbr, abbrevs) {\n  // handle single-char shorthands glommed together, like\n  // npm ls -glp, but only if there is one dash, and only if\n  // all of the chars are single-char shorthands, and it's\n  // not a match to some other abbrev.\n  arg = arg.replace(/^-+/, '')\n  if (abbrevs[arg] && !shorthands[arg]) {\n    return null\n  }\n  if (shortAbbr[arg]) {\n    arg = shortAbbr[arg]\n  } else {\n    var singles = shorthands.___singles\n    if (!singles) {\n      singles = Object.keys(shorthands).filter(function (s) {\n        return s.length === 1\n      }).reduce(function (l,r) { l[r] = true ; return l }, {})\n      shorthands.___singles = singles\n    }\n    var chrs = arg.split(\"\").filter(function (c) {\n      return singles[c]\n    })\n    if (chrs.join(\"\") === arg) return chrs.map(function (c) {\n      return shorthands[c]\n    }).reduce(function (l, r) {\n      return l.concat(r)\n    }, [])\n  }\n\n  if (shorthands[arg] && !Array.isArray(shorthands[arg])) {\n    shorthands[arg] = shorthands[arg].split(/\\s+/)\n  }\n  return shorthands[arg]\n}\n\nif (module === require.main) {\nvar assert = require(\"assert\")\n  , util = require(\"util\")\n\n  , shorthands =\n    { s : [\"--loglevel\", \"silent\"]\n    , d : [\"--loglevel\", \"info\"]\n    , dd : [\"--loglevel\", \"verbose\"]\n    , ddd : [\"--loglevel\", \"silly\"]\n    , noreg : [\"--no-registry\"]\n    , reg : [\"--registry\"]\n    , \"no-reg\" : [\"--no-registry\"]\n    , silent : [\"--loglevel\", \"silent\"]\n    , verbose : [\"--loglevel\", \"verbose\"]\n    , h : [\"--usage\"]\n    , H : [\"--usage\"]\n    , \"?\" : [\"--usage\"]\n    , help : [\"--usage\"]\n    , v : [\"--version\"]\n    , f : [\"--force\"]\n    , desc : [\"--description\"]\n    , \"no-desc\" : [\"--no-description\"]\n    , \"local\" : [\"--no-global\"]\n    , l : [\"--long\"]\n    , p : [\"--parseable\"]\n    , porcelain : [\"--parseable\"]\n    , g : [\"--global\"]\n    }\n\n  , types =\n    { aoa: Array\n    , nullstream: [null, Stream]\n    , date: Date\n    , str: String\n    , browser : String\n    , cache : path\n    , color : [\"always\", Boolean]\n    , depth : Number\n    , description : Boolean\n    , dev : Boolean\n    , editor : path\n    , force : Boolean\n    , global : Boolean\n    , globalconfig : path\n    , group : [String, Number]\n    , gzipbin : String\n    , logfd : [Number, Stream]\n    , loglevel : [\"silent\",\"win\",\"error\",\"warn\",\"info\",\"verbose\",\"silly\"]\n    , long : Boolean\n    , \"node-version\" : [false, String]\n    , npaturl : url\n    , npat : Boolean\n    , \"onload-script\" : [false, String]\n    , outfd : [Number, Stream]\n    , parseable : Boolean\n    , pre: Boolean\n    , prefix: path\n    , proxy : url\n    , \"rebuild-bundle\" : Boolean\n    , registry : url\n    , searchopts : String\n    , searchexclude: [null, String]\n    , shell : path\n    , t: [Array, String]\n    , tag : String\n    , tar : String\n    , tmp : path\n    , \"unsafe-perm\" : Boolean\n    , usage : Boolean\n    , user : String\n    , username : String\n    , userconfig : path\n    , version : Boolean\n    , viewer: path\n    , _exit : Boolean\n    }\n\n; [[\"-v\", {version:true}, []]\n  ,[\"---v\", {version:true}, []]\n  ,[\"ls -s --no-reg connect -d\",\n    {loglevel:\"info\",registry:null},[\"ls\",\"connect\"]]\n  ,[\"ls ---s foo\",{loglevel:\"silent\"},[\"ls\",\"foo\"]]\n  ,[\"ls --registry blargle\", {}, [\"ls\"]]\n  ,[\"--no-registry\", {registry:null}, []]\n  ,[\"--no-color true\", {color:false}, []]\n  ,[\"--no-color false\", {color:true}, []]\n  ,[\"--no-color\", {color:false}, []]\n  ,[\"--color false\", {color:false}, []]\n  ,[\"--color --logfd 7\", {logfd:7,color:true}, []]\n  ,[\"--color=true\", {color:true}, []]\n  ,[\"--logfd=10\", {logfd:10}, []]\n  ,[\"--tmp=/tmp -tar=gtar\",{tmp:\"/tmp\",tar:\"gtar\"},[]]\n  ,[\"--tmp=tmp -tar=gtar\",\n    {tmp:path.resolve(process.cwd(), \"tmp\"),tar:\"gtar\"},[]]\n  ,[\"--logfd x\", {}, []]\n  ,[\"a -true -- -no-false\", {true:true},[\"a\",\"-no-false\"]]\n  ,[\"a -no-false\", {false:false},[\"a\"]]\n  ,[\"a -no-no-true\", {true:true}, [\"a\"]]\n  ,[\"a -no-no-no-false\", {false:false}, [\"a\"]]\n  ,[\"---NO-no-No-no-no-no-nO-no-no\"+\n    \"-No-no-no-no-no-no-no-no-no\"+\n    \"-no-no-no-no-NO-NO-no-no-no-no-no-no\"+\n    \"-no-body-can-do-the-boogaloo-like-I-do\"\n   ,{\"body-can-do-the-boogaloo-like-I-do\":false}, []]\n  ,[\"we are -no-strangers-to-love \"+\n    \"--you-know the-rules --and so-do-i \"+\n    \"---im-thinking-of=a-full-commitment \"+\n    \"--no-you-would-get-this-from-any-other-guy \"+\n    \"--no-gonna-give-you-up \"+\n    \"-no-gonna-let-you-down=true \"+\n    \"--no-no-gonna-run-around false \"+\n    \"--desert-you=false \"+\n    \"--make-you-cry false \"+\n    \"--no-tell-a-lie \"+\n    \"--no-no-and-hurt-you false\"\n   ,{\"strangers-to-love\":false\n    ,\"you-know\":\"the-rules\"\n    ,\"and\":\"so-do-i\"\n    ,\"you-would-get-this-from-any-other-guy\":false\n    ,\"gonna-give-you-up\":false\n    ,\"gonna-let-you-down\":false\n    ,\"gonna-run-around\":false\n    ,\"desert-you\":false\n    ,\"make-you-cry\":false\n    ,\"tell-a-lie\":false\n    ,\"and-hurt-you\":false\n    },[\"we\", \"are\"]]\n  ,[\"-t one -t two -t three\"\n   ,{t: [\"one\", \"two\", \"three\"]}\n   ,[]]\n  ,[\"-t one -t null -t three four five null\"\n   ,{t: [\"one\", \"null\", \"three\"]}\n   ,[\"four\", \"five\", \"null\"]]\n  ,[\"-t foo\"\n   ,{t:[\"foo\"]}\n   ,[]]\n  ,[\"--no-t\"\n   ,{t:[\"false\"]}\n   ,[]]\n  ,[\"-no-no-t\"\n   ,{t:[\"true\"]}\n   ,[]]\n  ,[\"-aoa one -aoa null -aoa 100\"\n   ,{aoa:[\"one\", null, 100]}\n   ,[]]\n  ,[\"-str 100\"\n   ,{str:\"100\"}\n   ,[]]\n  ,[\"--color always\"\n   ,{color:\"always\"}\n   ,[]]\n  ,[\"--no-nullstream\"\n   ,{nullstream:null}\n   ,[]]\n  ,[\"--nullstream false\"\n   ,{nullstream:null}\n   ,[]]\n  ,[\"--notadate 2011-01-25\"\n   ,{notadate: \"2011-01-25\"}\n   ,[]]\n  ,[\"--date 2011-01-25\"\n   ,{date: new Date(\"2011-01-25\")}\n   ,[]]\n  ].forEach(function (test) {\n    var argv = test[0].split(/\\s+/)\n      , opts = test[1]\n      , rem = test[2]\n      , actual = nopt(types, shorthands, argv, 0)\n      , parsed = actual.argv\n    delete actual.argv\n    console.log(util.inspect(actual, false, 2, true), parsed.remain)\n    for (var i in opts) {\n      var e = JSON.stringify(opts[i])\n        , a = JSON.stringify(actual[i] === undefined ? null : actual[i])\n      if (e && typeof e === \"object\") {\n        assert.deepEqual(e, a)\n      } else {\n        assert.equal(e, a)\n      }\n    }\n    assert.deepEqual(rem, parsed.remain)\n  })\n}\n"]}
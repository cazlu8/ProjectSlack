{"version":3,"sources":["performance.js"],"names":[],"mappings":"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","file":"performance-compiled.js","sourcesContent":["\nvar iconv = require('iconv');\nvar iconv_lite = require(\"../index\");\n\nvar encoding = process.argv[2] || \"windows-1251\";\nvar convertTimes = 10000;\n\nvar encodingStrings = {\n    'windows-1251': 'This is a test string 32 chars..',\n    'gbk':          '这是中文字符测试。。！@￥%12',\n    'utf8': '这是中文字符测试。。！@￥%12This is a test string 48 chars..',\n};\n// Test encoding.\nvar str = encodingStrings[encoding];\nif (!str) {\n    throw new Error('Don\\'t support ' + encoding + ' performance test.');\n}\nfor (var i = 0; i < 13; i++) {\n    str = str + str;\n}\n\nconsole.log('\\n' + encoding + ' charset performance test:');\nconsole.log(\"\\nEncoding \"+str.length+\" chars \"+convertTimes+\" times:\");\n\nvar start = Date.now();\nvar converter = new iconv.Iconv(\"utf8\", encoding);\nfor (var i = 0; i < convertTimes; i++) {\n    var b = converter.convert(str);\n}\nvar duration = Date.now() - start;\nvar mbs = convertTimes*b.length/duration/1024;\n\nconsole.log(\"iconv: \"+duration+\"ms, \"+mbs.toFixed(2)+\" Mb/s.\");\n\nvar start = Date.now();\nfor (var i = 0; i < convertTimes; i++) {\n    var b = iconv_lite.encode(str, encoding);\n}\nvar duration = Date.now() - start;\nvar mbs = convertTimes*b.length/duration/1024;\n\nconsole.log(\"iconv-lite: \"+duration+\"ms, \"+mbs.toFixed(2)+\" Mb/s.\");\n\n\n// Test decoding.\nvar buf = iconv_lite.encode(str, encoding);\nconsole.log(\"\\nDecoding \"+buf.length+\" bytes \"+convertTimes+\" times:\");\n\nvar start = Date.now();\nvar converter = new iconv.Iconv(encoding, \"utf8\");\nfor (var i = 0; i < convertTimes; i++) {\n    var s = converter.convert(buf).toString();\n}\nvar duration = Date.now() - start;\nvar mbs = convertTimes*buf.length/duration/1024;\n\nconsole.log(\"iconv: \"+duration+\"ms, \"+mbs.toFixed(2)+\" Mb/s.\");\n\nvar start = Date.now();\nfor (var i = 0; i < convertTimes; i++) {\n    var s = iconv_lite.decode(buf, encoding);\n}\nvar duration = Date.now() - start;\nvar mbs = convertTimes*buf.length/duration/1024;\n\nconsole.log(\"iconv-lite: \"+duration+\"ms, \"+mbs.toFixed(2)+\" Mb/s.\");\n\n"]}